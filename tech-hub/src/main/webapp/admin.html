
<!doctype html>
<html lang="it">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>TechHub Italia - Admin</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="css/prova.css">
</head>

<body class="admin-area">
    <div class="container my-5">

        <div class="d-flex align-items-center justify-content-between mb-4">
            <h1 class="text-center text-primary mb-4">
                <i class="bi bi-shield-lock me-2"></i>Dashboard gestione annunci
            </h1>

            <div class="btn-container d-flex gap-2" >
                <div class="text-end mb-4">
                    <button id="create-btn" type="button" class="btn btn-primary btn-sm btn-icon d-block" aria-label="Create Job">
                        <i class="bi bi-plus-circle me-2"></i> Nuovo Annuncio
                    </button>
                </div>
                
                <div class="text-end mb-4">
                    <button id="logout-btn" type="button" class="btn btn-danger btn-sm btn-icon d-block" aria-label="Logout">
                        <i class="bi bi-box-arrow-right me-1"></i> Logout
                    </button>
                </div>
            </div>
        </div>



        <!-- SEZIONE FILTRI -->
            <div class="row g-2 mb-4">
                <div class="col-md-3">
                    <input type="text" id="jobSearch" class="form-control" placeholder="Cerca una posizione..."
                        onkeyup="filterJobs()">  
                </div>
        
                <!--TODO: permettere selezione multipla per ciascun filtro in cui ha senso se avanza tempo-->
        
                <div class="col-md-2">
                    <select id="filterSkill" class="form-select" onchange="filterJobs()">
                        <option value="">Skill (Tutte)</option>
                    </select>      
                </div>
        
                <div class="col-md-2">
                    <select id="filterCity" class="form-select" onchange="filterJobs()">
                        <option value="">Sede (Tutte)</option>
                    </select>      
                </div>

                <!--filtro per empTypeId-->
                <div class="col-md-2">
                    <select id="filterEmpType" class="form-select" onchange="filterJobs()">
                        <option value="">Contratto (Tutti)</option>
                    </select>      
                </div>

                <div class="col-md-2">
                    <select id="filterWorkSched" class="form-select" onchange="filterJobs()">
                        <option value="">Orari (Tutti)</option>
                    </select>
                </div>

                <div class="col-md-1">
                    <select id="filterIsOpen" class="form-select" onchange="filterJobs()">
                        <option value="">Stato</option>
                        <option value="1">Aperta</option>
                        <option value="0">Chiusa</option>
                    </select>
                </div>
            </div>



        <!--SEZIONE ANNUNCI ESISTENTI -->


        <div class="mb-4 text-primary">
            <div class="d-flex justify-content-between" >
                <h4 class="mb-4 text-center text-primary">
                    <i class="bi bi-card-list me-2"></i>
                    Annunci Esistenti
                </h4>
                <span class="text-muted" id="jobsCount"> opportunità trovate</span>
            </div>
            <div id="jobSection" class="d-flex align-items-center gap-2">
                <div id="jobsGrid" class="row g-4"></div>
            </div>
        </div>

    
     
        
        <!-- SEZIONE CREAZIONE NUOVO ANNUNCIO -->
        <div class="card p-4 mb-5">
            <h4 class="mb-4 text-center text-primary">
                <i class="bi bi-plus-circle me-2"></i>Crea Nuovo Annuncio
            </h4>
            
            <p class="text-muted text-center mb-4" style="font-size: 0.9rem;">
                I campi contrassegnati con * sono obbligatori.
            </p>

            <form id="createJobOpeningForm">
                <div class="row g-3">
                    <div class="col-md-4">
                        <label for="titlejobOpCreate" class="form-label">Titolo Posizione Lavorativa*</label>
                        <input type="text" class="form-control" id="titlejobOpCreate" name="titlejobOpCreate"
                            placeholder="Esempio: Sviluppatore Frontend" required>
                    </div>

                    <div class="col-md-4">
                        <label for="empTypeIdjobOpCreate" class="form-label">Contratto*</label>
                        <select class="form-select" id="empTypeIdjobOpCreate" name="empTypeIdjobOpCreate" required>
                            <option value="">Seleziona contratto</option>
                        </select>
                    </div>

                    <div class="col-md-4">
                        <label for="cityIdjobOpCreate" class="form-label">Sede*</label>
                        <select class="form-select" id="cityIdjobOpCreate" name="cityIdjobOpCreate" required>
                            <option value="">Seleziona sede</option>
                        </select>
                    </div>

                    <div class="col-md-4">
                        <label for="workSchedIdjobOpCreate" class="form-label">Orario*</label>
                        <select class="form-select" id="workSchedIdjobOpCreate" name="workSchedIdjobOpCreate" required>
                            <option value="">Seleziona orario</option>
                        </select>
                    </div>

                    <div class="col-md-4">
                        <label for="ralFromjobOpCreate" class="form-label">RAL minima</label>
                        <input type="number" class="form-control" id="ralFromjobOpCreate" name="ralFromjobOpCreate" placeholder="Es. 250000">
                    </div>

                    <div class="col-md-4">
                        <label for="ralTojobOpCreate" class="form-label">RAL massima</label>
                        <input type="number" class="form-control" id="ralTojobOpCreate" name="ralTojobOpCreate" placeholder="Es.50000">
                    </div>

                    <div class="col-12">
                        <label for="descriptionjobOpCreate" class="form-label">Descrizione Posizione</label>
                        <textarea class="form-control" id="descriptionjobOpCreate" name="descriptionjobOpCreate" rows="4"
                            placeholder="Descrivi la posizione lavorativa, le responsabilità, i requisiti e le competenze..."></textarea>
                    </div>

                    <div class="col-md-12">
                        <label for="skillsJobOpCreate" class="form-label">Seleziona skills</label> <!--TODO: deve essere vietato non inserire alcuna skill?-->
                        <div id="skillsContainer" class="skills-box" role="group" aria-labelledby="skillsJobOpCreate">   
                            <!--<input type="checkbox" class="btn-check" id="skillsJobOpCreate1" autocomplete="off" name="skillsJobOpCreate[]" value="1"> 
                            <label class="btn btn-primary" for="skillsJobOpCreate1">HTML</label>
                            <input type="checkbox" class="btn-check" id="skillsJobOpCreate2" autocomplete="off"  name="skillsJobOpCreate[]" value="2"> 
                            <label class="btn btn-primary" for="skillsJobOpCreate2">CSS</label>-->
                        </div> 
                    </div>

                    <div class="col-md-4 d-flex flex-column justify-content-center">
                        <label for="closingDatejobOpCreate" class="form-label">Data di Chiusura dell'annuncio*</label>
                        <input type="date" class="form-control" id="closingDatejobOpCreate" name="closingDatejobOpCreate" required>
                    </div>

                    <div class="col-md-4 d-flex flex-column justify-content-center">
                        <label for="isOpenjobOpCreate" class="form-label">Stato Annuncio*</label>
                        <select class="form-select" id="isOpenjobOpCreate" name="isOpenjobOpCreate" required>
                            <option value="true">Aperto</option>
                            <option value="false">Chiuso</option>
                        </select>
                    </div>

                    <div class="col-md-4 d-flex justify-content-center align-items-center">
                        <button type="submit" class="btn btn-primary btn-lg btn-icon">
                            <i class="bi bi-plus-circle"></i> Crea Annuncio
                        </button>
                    </div>
                </div>
            </form>
        </div>

    

        <!-- MODALE DETTAGLI JOBS -->
        <div class="modal fade" id="jobDetailModal" tabindex="-1" aria-labelledby="jobDetailLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content border-0 shadow-lg" style="border-radius: 16px; overflow: hidden;">

                    <div class="modal-header text-white" style="background: var(--bs-primary);">
                        <h5 class="modal-title fw-semibold" id="jobDetailLabel">Dettagli posizione</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                            aria-label="Chiudi"></button>
                    </div>

                    <!-- QUI VA TITLE E DESCRIPTION -->
                    <div class="modal-body p-4">

                        <!-- TITOLO DELLA POSIZIONE -->
                        <h3 id="jobDetailTitle" class="fw-bold mb-3 text-primary"></h3>

                        <!-- RIGA INFO PRINCIPALI -->
                        <div class="row g-3 row-cols-1 row-cols-md-4 mb-4">

                            <div class="col">
                                <div class="p-3 border rounded bg-light h-100">
                                    <h6 class="fw-semibold mb-1"><i class="bi bi-geo-alt-fill text-primary"></i> Sede</h6>
                                    <span id="jobDetailCity" class="text-muted"></span>
                                </div>
                            </div>

                            <div class="col">
                                <div class="p-3 border rounded bg-light h-100">
                                    <h6 class="fw-semibold mb-1"><i class="bi bi-briefcase-fill text-primary"></i> Contratto
                                    </h6>
                                    <span id="jobDetailContract" class="text-muted"></span>
                                </div>
                            </div>

                            <div class="col">
                                <div class="p-3 border rounded bg-light h-100">
                                    <h6 class="fw-semibold mb-1"><i class="bi bi-wallet-fill text-primary"></i> RAL</h6>
                                    <span id="jobDetailRal" class="text-muted"></span>
                                </div>
                            </div>

                            <div class="col">
                                <div class="p-3 border rounded bg-light h-100">
                                    <h6 class="fw-semibold mb-1"><i class="bi bi-clock-fill text-primary"></i> Orario</h6>
                                    <span id="jobDetailWorkSched" class="text-muted"></span>
                                </div>
                            </div>

                        </div>

                        <!-- DESCRIZIONE -->
                        <div class="mb-4">
                            <h6 class="fw-semibold mb-1">Descrizione</h6>
                            <p id="jobDetailDescription" class="text-muted"></p>
                        </div>

                        <!-- SKILLS -->
                        <div id="skillsWrapper" class="mt-4">
                            <h6 class="fw-semibold mb-2">Competenze richieste</h6>
                            <div id="jobDetailSkills" class="d-flex flex-wrap gap-2"></div>
                        </div>

                        <div class="mt-4">
                        
                            <h5 class="fw-bold text-primary mb-3">Classifica Candidati</h5>
                            <p id="jobDetailNoCandidates" class="text-muted d-none">Non ci sono candidati per questa posizione</p>
                            <div id="jobDetailPodium" class="my-4">
                            </div>
                        
                            <!-- LISTA DAL 4° POSTO IN POI -->
                            <h6 id="jobDetailAllCandidatesHeader" class="fw-semibold mt-4 d-none">Tutti i candidati</h6>
                            <div id="jobDetailRanking" class="list-group">
                            </div>
                        
                        </div>

                    </div> <!-- FINE .modal-body -->

                    <div class="modal-footer d-flex justify-content-between">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Chiudi</button>
                        <button class="btn btn-danger fw-semibold" id="jobDeleteDetailBtn">Elimina</button>
                    </div>

                </div>
            </div>
        </div>



        <!-- MODALE CONFERMA CANCELLAZIONE -->
        <div class="modal fade" id="jobDeleteModal" tabindex="-1" aria-labelledby="jobDeleteLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content border-0 shadow-lg" style="border-radius: 16px; overflow: hidden;">

                    <div class="modal-header modal-header-danger text-white" style="background: var(--bs-primary);">
                        <h5 class="modal-title fw-semibold" id="jobDetailLabel">Sei sicuro di voler eliminare l'annuncio?</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                            aria-label="Chiudi"></button>
                    </div>

                    <!-- QUI VA TITLE E DESCRIPTION -->
                    <div class="modal-body p-4">


                        <!-- DESCRIZIONE -->
                        <div class="mb-4">
                            <h6 class="fw-semibold mb-1">L'operazione è irreversibile, continuare?</h6>
                        </div>
                    

                    </div> <!-- FINE .modal-body -->

                    <div class="modal-footer d-flex justify-content-between">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Annulla</button>
                        <button class="btn btn-danger fw-semibold" id="confirmDeleteBtn">Elimina</button>
                    </div>

                </div>
            </div>
        </div>


        <!-- MODALE DETTAGLI CANDIDATO -->
        <div class="modal fade" id="candidateDetailModal" tabindex="-1" aria-labelledby="candidateDetailLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content border-0 shadow-lg" style="border-radius: 16px; overflow: hidden;">

                    <div class="modal-header text-white" style="background: var(--bs-primary);">
                        <h5 class="modal-title fw-semibold" id="candidateDetailLabel">Dettagli candidato</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                            aria-label="Chiudi"></button>
                    </div>

                    <div class="modal-body p-4">

                        <h3 id="candidateDetailName" class="fw-bold mb-3 text-primary"></h3>

                        <div class="row g-3 row-cols-1 row-cols-md-2 mb-4">

                            <div class="col">
                                <div class="p-3 border rounded bg-light h-100">
                                    <h6 class="fw-semibold mb-1"><i class="bi bi-envelope-fill text-primary"></i> Email</h6>
                                    <span id="candidateDetailEmail" class="text-muted"></span>
                                </div>
                            </div>

                            <div class="col">
                                <div class="p-3 border rounded bg-light h-100">
                                    <h6 class="fw-semibold mb-1"><i class="bi bi-geo-alt-fill text-primary"></i> Città</h6>
                                    <span id="candidateDetailCity" class="text-muted"></span>
                                </div>
                            </div>

                            <div class="col">
                                <div class="p-3 border rounded bg-light h-100">
                                    <h6 class="fw-semibold mb-1"><i class="bi bi-calendar-event-fill text-primary"></i> Data di nascita</h6>
                                    <span id="candidateDetailBirthDate" class="text-muted"></span>
                                </div>
                            </div>

                            <div class="col">
                                <div class="p-3 border rounded bg-light h-100">
                                    <h6 class="fw-semibold mb-1"><i class="bi bi-map-fill text-primary"></i> Indirizzo</h6>
                                    <span id="candidateDetailAddress" class="text-muted"></span>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="modal-footer d-flex justify-content-between">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Chiudi</button>
                    </div>

                </div>
            </div>
        </div>

    </div>
    
    <!-- SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script src="js/admin.js"></script>
</body>
</html>
